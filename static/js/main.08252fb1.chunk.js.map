{"version":3,"sources":["hooks/useApiMutation.ts","components/spottable/spottable.tsx","api/base.ts","api/typings.ts","api/kinopub.ts","api/client.ts","components/text/text.tsx","components/icon/icon.tsx","utils/keyboard.ts","hooks/useButtonEffect.ts","hooks/useStorageState.ts","../node_modules/ilib/lib sync /^$","hooks/useDeviceInfo.ts","components/spinner/spinner.tsx","components/link/link.tsx","storage.ts","routes.ts","attachErrorHandler.ts","components/router/router.tsx","layouts/fill/fill.tsx","containers/menu/menu.tsx","layouts/main/main.tsx","components/view/view.tsx","hooks/useDeviceAuthorizationEffect.ts","containers/views/views.tsx","App/App.tsx","index.tsx"],"names":["useApiMutation","method","client","useMemo","ApiClient","mutation","useMutation","params","Object","assign","mutate","mutateAsync","Spottable","Item","Bool","WatchingStatus","encodeParam","param","encodeURIComponent","value","JSON","stringify","_","normalizeParams","keys","filter","key","undefined","map","isArray","idx","join","normalizeArrayParams","BaseApiClient","baseUrl","this","startsWith","window","location","protocol","url","data","accessToken","getAccessToken","access_token","fetch","body","serialize","response","status","clearTokens","json","error","toString","request","Error","refresh_token","expires_in","KINOPUB_API_BASE_URL","process","KINOPUB_API_CLIENT_ID","KINOPUB_API_CLIENT_SECRET","storage","getItem","setItem","forEach","removeItem","clientId","clientSecret","accessTokenCheckIntervaId","clearInterval","deviceInfo","onSuccess","clearTimers","saveTokens","deviceNotify","code","a","post","grant_type","client_id","client_secret","onConfirm","refreshToken","getRefreshToken","refreshTokens","processTokensReponse","requestDeviceCode","interval","user_code","verification_uri","Promise","resolve","reject","setInterval","requestTokens","deviceUnlink","get","id","settings","page","perpage","nolinks","True","mid","file","type","like","sid","item","title","folder","video","season","subscribed","time","sort","Text","className","props","cx","ICONS_MAP","notifications_active","new_releases","library_music","live_tv","play_arrow","play_circle_outline","sports_soccer","expand_more","expand_less","Icon","name","BUTTON_HANDLERS","KeyboardCodes","Enter","Play","Pause","Back","Backspace","Escape","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Red","Green","Yellow","Blue","Settings","isKey","e","castArray","keyCode","which","some","isBackButton","registerButtonHandler","handler","addEventListener","isBack","preventDefault","stopPropagation","h","useButtonEffect","useEffect","useStorageState","useState","_setValue","setValue","useCallback","newValue","expire","listener","unsubscribe","subscribe","webpackEmptyContext","req","module","exports","pkg","require","APP_TITLE","description","APP_INFO","version","useDeviceInfo","software","setSoftware","hardware","setHardware","platform","detect","navigator","platformName","deviceinfo","device","modelName","sdkVersion","Spinner","Link","href","state","children","icon","iconOnly","active","onClick","history","useHistory","handleOnClick","push","role","prefix","parse","localStorage","Date","now","Storage","listeners","l","emit","requestAnimationFrame","PATHS","Index","Home","Search","Watching","Category","Channels","Channel","Bookmarks","Bookmark","Collections","Collection","History","Video","Trailer","Pair","Speed","generatePath","pattern","search","query","URLSearchParams","baseGeneratePath","ev","stack","length","substring","errorInfo","message","filename","line","lineno","column","colno","IS_WEB","origin","Router","FillLayout","menuItems","categoryId","Menu","useLocation","list","pathname","MainLayout","rest","View","component","layout","Layout","render","routeProps","fallback","createElement","useDeviceAuthorizationEffect","deviceAuthorizationAsync","isLogged","handleOnConfirm","userCode","verificationUri","replace","timeoutId","setTimeout","path","clearTimeout","Views","showNotice","setShowNotice","handleBackButtonClick","goBack","close","BookmarkView","React","lazy","BookmarksView","CategoryView","ChannelView","ChannelsView","CollectionView","CollectionsView","HistoryView","HomeView","IndexView","ItemView","NotFoundView","PairView","SearchView","SettingsView","SpeedView","TrailerView","VideoView","WatchingView","queryClient","QueryClient","defaultOptions","queries","staleTime","MoonstoneDecorator","QueryClientProvider","exact","app","document","getElementById"],"mappings":"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","file":"static/js/main.08252fb1.chunk.js","sourcesContent":["import { useMemo } from 'react';\nimport { useMutation } from 'react-query';\n\nimport ApiClient from 'api';\n\nimport { Method, Methods } from './useApi';\n\nfunction useApiMutation<TMethod extends Method, TData = Methods[TMethod], TError = string, TVariables = Parameters<ApiClient[TMethod]>>(\n  method: TMethod,\n) {\n  const client = useMemo(() => new ApiClient(), []);\n\n  // @ts-expect-error\n  const mutation = useMutation<TData, TError, TVariables>([client, method], (params) => client[method](...params));\n\n  return Object.assign({}, mutation, {\n    [method]: mutation.mutate,\n    [`${method}Async`]: mutation.mutateAsync,\n  });\n}\n\nexport default useApiMutation;\n","import Spottable from '@enact/spotlight/Spottable';\nimport Item from '@enact/ui/Item';\n\nexport default Spottable(Item);\n","import isArray from 'lodash/isArray';\nimport { serialize } from 'object-to-formdata';\n\ntype Primitive = string | number | boolean;\n\ntype Param = Primitive | null | undefined | Param[] | { [key: string]: Param };\n\ntype Params = Record<string, Param> | null;\n\nfunction isPrimitive(value: any): value is Primitive {\n  return value !== Object(value);\n}\n\nexport const stringifyParams = (params?: Params) =>\n  JSON.stringify(params, (_, value) => {\n    if (value === null || value === '') {\n      return undefined;\n    }\n\n    return value;\n  });\n\nexport const encodeParam = (param: Param) =>\n  encodeURIComponent(isPrimitive(param) ? (param as Primitive) : stringifyParams(param as Record<string, Param>));\n\nexport const normalizeArrayParams = (key: string, params: Param[]) =>\n  params.map((param, idx) => `${encodeParam(`${key}[${idx}]`)}=${encodeParam(param)}`).join('&');\n\nexport const normalizeParams = (params?: Params) =>\n  Object.keys(params || {})\n    .filter((key) => params?.[key] !== '' && params?.[key] !== null && params?.[key] !== undefined)\n    .map((key) => (isArray(params?.[key]) ? normalizeArrayParams(key, params?.[key]! as Param[]) : `${key}=${encodeParam(params?.[key])}`))\n    .join('&');\n\nclass BaseApiClient {\n  protected baseUrl: string;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl.startsWith('http')\n      ? baseUrl\n      : window.location.protocol.startsWith('http')\n      ? `${window.location.protocol}//${baseUrl}`\n      : `http://${baseUrl}`;\n  }\n\n  private async request<T>(method: 'GET' | 'POST', url: string, params?: Params, data?: Params) {\n    const accessToken = this.getAccessToken();\n\n    if (accessToken) {\n      params = {\n        ...params,\n        access_token: accessToken,\n      };\n    }\n\n    try {\n      const response = await fetch(`${this.baseUrl}${url}?${normalizeParams(params)}`, {\n        method,\n        body: data && serialize(data),\n      });\n\n      if (response.status === 401) {\n        this.clearTokens();\n      }\n\n      const json = await response.json();\n\n      return json as T;\n    } catch (ex) {\n      return {\n        error: ex.toString() as string,\n      } as unknown as T;\n    }\n  }\n\n  protected get<T>(url: string, params?: Params) {\n    return this.request<T>('GET', url, params);\n  }\n\n  protected post<T>(url: string, data?: Params, params?: Params) {\n    return this.request<T>('POST', url, params, data);\n  }\n\n  protected getAccessToken(): string {\n    throw new Error('not implemented');\n  }\n\n  protected getRefreshToken(): string {\n    throw new Error('not implemented');\n  }\n\n  protected saveTokens({\n    access_token,\n    refresh_token,\n    expires_in,\n  }: {\n    access_token: string;\n    refresh_token: string;\n    expires_in: number;\n  }): void | Promise<void> {\n    throw new Error('not implemented');\n  }\n\n  protected clearTokens(): void | Promise<void> {\n    throw new Error('not implemented');\n  }\n}\n\nexport default BaseApiClient;\n","/* eslint-disable no-shadow */\n\nexport enum Bool {\n  True = 1,\n  False = 0,\n}\n\nexport type Streaming = 'http' | 'hls' | 'hls2' | 'hls4';\n\nexport type DeviceInfo = {\n  /**\n   * Название устройства.\n   */\n  title: string;\n\n  /**\n   * Информация по “железу” устройства.\n   */\n  hardware: string;\n\n  /**\n   * Информация по софту устройства.\n   */\n  software: string;\n};\n\nexport type User = {\n  username: string;\n  reg_date: number;\n  subscription: {\n    active: boolean;\n    end_time: number;\n    days: number;\n  };\n  profile: {\n    name: string;\n    avatar: string;\n  };\n};\n\nexport type ServerLocation = {\n  id: string;\n  location: string;\n  name: string;\n};\n\nexport type StreamingType = {\n  id: string;\n  code: Streaming;\n  name: string;\n  description: string;\n};\n\nexport type VoiceoverType = {\n  id: string;\n  title: string;\n  short_title: string;\n};\n\nexport type VoiceoverAuthor = {\n  id: string;\n  title: string;\n  short_title: string;\n};\n\nexport type VideoQuality = {\n  id: string;\n  title: string;\n  quality: number;\n};\n\nexport type Type = {\n  id: string;\n  title: string;\n};\n\nexport type Gender = {\n  id: string;\n  title: string;\n  type: string;\n};\n\nexport type Country = {\n  id: string;\n  title: string;\n};\n\nexport type DeviceSettingBoolean = {\n  type: undefined;\n  label: string;\n  value: Bool;\n};\n\nexport type DeviceSettingList = {\n  type: 'list';\n  label: string;\n  value: {\n    id: string;\n    label: string;\n    description: string;\n    selected: Bool;\n  }[];\n};\n\nexport type DeviceSettings = {\n  /**\n   * Поддерживает ли устройство SSL\n   */\n  supportSsl: DeviceSettingBoolean;\n\n  /**\n   * Поддерживает ли устройство HEVC\n   */\n  supportHevc: DeviceSettingBoolean;\n\n  /**\n   * Поддерживает ли устройство HDR (10bit color)\n   */\n  supportHdr: DeviceSettingBoolean;\n\n  /**\n   * Поддерживает ли устройство UHD/4K\n   */\n  support4k: DeviceSettingBoolean;\n\n  /**\n   * На данный момент только для HLS4, плейлист строится из всех доступных файлов AVC+HEVC\n   */\n  mixedPlaylist: DeviceSettingBoolean;\n\n  /**\n   * Типа стриминга\n   */\n  streamingType: DeviceSettingList;\n\n  /**\n   * Регион, откуда получать контент\n   */\n  serverLocation: DeviceSettingList;\n};\n\nexport type Device = {\n  id: string;\n  title: string;\n  hardware: string;\n  software: string;\n  created: number;\n  updated: number;\n  last_seen: number;\n  is_browser: number;\n  settings: DeviceSettings;\n};\n\nexport type Tracklist = {\n  /**\n   * Исполнитель\n   */\n  artist: string;\n\n  /**\n   * Название композиции\n   */\n  title: string;\n\n  /**\n   * Ссылка на аудио файл\n   */\n  url: string;\n};\n\nexport type Subtitle = {\n  lang: string;\n  /**\n   * Смещение относительно видео-потока\n   */\n  shift: number;\n\n  /**\n   * Доступно в файле-исходнике, вшиты в него отдельным стримом\n   */\n  embed: boolean;\n\n  file: string;\n\n  url: string;\n};\n\nexport type Audio = {\n  id: string;\n  index: number;\n  codec: 'aac' | 'ac3';\n  channels: number;\n  lang: string;\n  type?: {\n    id: string;\n    title: string;\n    short_title?: string;\n  };\n  author?: {\n    id: string;\n    title: string;\n    short_title?: string;\n  };\n};\n\nexport type File = {\n  w: number;\n  h: number;\n  codec: string;\n  quality: string;\n  quality_id: string;\n  file: string;\n  url: {\n    http: string;\n    hls?: string;\n    hls2?: string;\n    hls4?: string;\n  };\n};\n\nexport type Trailer = {\n  id: string;\n  url: string;\n  files?: File[];\n};\n\nexport type Posters = {\n  small: string;\n  medium: string;\n  big: string;\n  wide?: string;\n};\n\nexport enum WatchingStatus {\n  NoWatched = -1,\n  Watching = 0,\n  Watched = 1,\n}\n\nexport type Video = {\n  id: string;\n\n  title: string;\n  thumbnail: string;\n\n  number: number;\n\n  /**\n   * Время в секундах\n   */\n  duration: number;\n\n  /**\n   * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n   */\n  watched: WatchingStatus;\n\n  watching: {\n    /**\n     * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n     */\n    status: WatchingStatus;\n\n    /**\n     * Время просмотра в секундах\n     */\n    time: number;\n  };\n  /**\n   * Номера аудио-дорожек ('1,2,3,4')\n   */\n  tracks: string[];\n  subtitles: Subtitle[];\n  audios: Audio[];\n  files: File[];\n  ac3: Bool;\n};\n\nexport type Season = {\n  id: string;\n\n  /**\n   * Название сезона\n   */\n  title: string;\n\n  number: number;\n\n  episodes: Video[];\n\n  /**\n   * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n   */\n  watched: WatchingStatus;\n\n  watching: {\n    /**\n     * Статус просмотра эпизода: -1 не смотрели вообще, 0 - начали смотреть, 1 - просмотрели\n     */\n    status: WatchingStatus;\n\n    /**\n     * Время просмотра в секундах\n     */\n    time: number;\n  };\n};\n\nexport type Item = {\n  id: string;\n\n  /**\n   * Название / Оригинальное название\n   */\n  title: string;\n\n  /**\n   * Тип контента\n   */\n  type: string;\n\n  /**\n   * Подтип контента, бывают многосерийные фильмы, концерты\n   */\n  subtype: 'multi' | string;\n  year: number;\n  cast: string;\n  director: string;\n  voice: string;\n\n  created_at: number;\n\n  updated_at: number;\n\n  /**\n   * Продолжительность фильма/сериала\n   */\n  duration: {\n    /**\n     * Средняя продолжительность для сериалов, полная для фильмов\n     */\n    average: number;\n\n    /**\n     * Общая продолжительность фильма, сериала\n     */\n    total: number;\n  };\n\n  /**\n   * Количество аудио дорожек\n   */\n  langs: number;\n\n  /**\n   * Присутствуют или нет AC-3 аудио\n   */\n  ac3: Bool;\n\n  /**\n   * Количество субтитров\n   */\n  subtitles: number;\n\n  /**\n   * Качество фильма, для сериалов берется наибольшее количество серий с определенным качеством\n   */\n  quality: number;\n\n  poor_quality: boolean;\n\n  genres: Gender[];\n  countries: Country[];\n\n  /**\n   * Описание фильма\n   */\n  plot: string;\n\n  tracklist: Tracklist[];\n  imdb: number;\n  imdb_rating: number;\n  imdb_votes: number;\n  kinopoisk: number;\n  kinopoisk_rating: number;\n  kinopoisk_votes: number;\n  rating: number;\n  views: number;\n  comments: number;\n\n  /**\n   * Для сериалов: true - окончен, false - снимается\n   */\n  finished: boolean;\n\n  /**\n   * Присутствуют посторонние вставки рекламы\n   */\n  advert: boolean;\n\n  /**\n   * Подписан ли пользователь на сериал\n   */\n  in_watchlist: true;\n\n  /**\n   * Подписан ли пользователь на сериал, alias in_watchlist\n   */\n  subscribed: true;\n\n  bookmarks: {\n    id: string;\n    title: string;\n  }[];\n\n  posters: Posters;\n  trailer: Trailer;\n\n  /**\n   * Всего эпизодов\n   */\n  total?: number;\n\n  /**\n   * Просмотренных эпизодов\n   */\n  watched?: number;\n\n  /**\n   * Новых/недосмотренных эпизовод\n   */\n  new?: number;\n};\n\nexport type ItemDetails = {\n  videos?: Video[];\n  seasons?: Season[];\n} & Item;\n\nexport type Comment = {\n  id: string;\n  depth: number;\n  unread: boolean;\n  deleted: boolean;\n  message: string;\n  created: number;\n  rating: number;\n  user: {\n    id: string;\n    name: string;\n    avatar: string;\n  };\n};\n\nexport type Channel = {\n  id: string;\n  title: string;\n  name: string;\n  logos: {\n    s: string;\n    m: string;\n  };\n  stream: string;\n};\n\nexport type Bookmark = {\n  id: string;\n  title: string;\n  views: number;\n  count: number;\n  created: number;\n  updated: number;\n};\n\nexport type Collection = {\n  id: string;\n  title: string;\n  watchers: number;\n  views: number;\n  created: number;\n  updated: number;\n  posters: Posters;\n};\n\nexport type History = {\n  /**\n   * Время где остановились\n   */\n  time: number;\n\n  /**\n   * Сколько раз смотрели данный media\n   */\n  counter: number;\n\n  /**\n   * Когда впервые посмотрели media\n   */\n  first_seen: number;\n\n  /**\n   * Когда последний раз посмотрели media\n   */\n  last_seen: number;\n\n  /**\n   * Описание item\n   */\n  item: Item;\n\n  /**\n   * Описание media\n   */\n  media: Video;\n};\n\nexport type Pagination = {\n  total: number;\n  current: number;\n  perpage: number;\n  total_items?: number;\n};\n\nexport type OnConfirm = (userCode: string, verificationUri: string) => void | Promise<void>;\n\nexport type Response = {\n  status?: number;\n  error?: string;\n  error_description?: string;\n};\n\nexport type PaginationResponse = {\n  pagination: Pagination;\n} & Response;\n\nexport type DeviceCodeResponse = {\n  /**\n   * Код, для дальнейшего получения access token'a\n   */\n  code: string;\n\n  /**\n   * Код который нужно показать пользователю\n   */\n  user_code: string;\n\n  /**\n   * URL где нужно ввести пользовательский код\n   */\n  verification_uri: string;\n\n  /**\n   * Через сколько данный device_code перестанет быть валидным\n   */\n  expires_in: number;\n\n  /**\n   * Интервал в секундах, через который посылать запросы на проверку активацииs\n   */\n  interval: number;\n} & Response;\n\nexport type TokensResponse = {\n  /**\n   * Токен, который требуется для обращения к API\n   */\n  access_token: string;\n\n  /**\n   * Тип токена (bearer)\n   */\n  token_type: string;\n\n  /**\n   * Через сколько данный access_token перестанет быть валидным\n   */\n  expires_in: number;\n\n  /**\n   * Токен, с помощью которого можно получать access_token без получения device_code\n   */\n  refresh_token: string;\n} & Response;\n\nexport type UserReponse = {\n  user: User;\n} & Response;\n\nexport type ServerLocationsReponse = {\n  items: ServerLocation[];\n} & Response;\n\nexport type StreamingTypesReponse = {\n  items: StreamingType[];\n} & Response;\n\nexport type VoiceoverTypesResponse = {\n  items: VoiceoverType[];\n} & Response;\n\nexport type VoiceoverAuthorsResponse = {\n  items: VoiceoverAuthor[];\n} & Response;\n\nexport type VideoQualitiesResponse = {\n  items: VideoQuality[];\n} & Response;\n\nexport type DevicesResponse = {\n  devices: Device[];\n} & Response;\n\nexport type DeviceInfoResponse = {\n  device: Device;\n} & Response;\n\nexport type DeviceRemoveResponse = {\n  /**\n   * Указывает, что данный запрос вызван текущим устройством или нет.\n   * Удаление текущего устройства/браузера равносильно логауту.\n   */\n  current: boolean;\n} & Response;\n\nexport type DeviceSettingsResponse = {\n  settings: DeviceSettings;\n} & Response;\n\nexport type DeviceSettingsParams = {\n  [key in keyof DeviceSettings]?: DeviceSettings[key] extends DeviceSettingBoolean ? boolean : number;\n};\n\nexport type TypesResponse = Type[];\n\nexport type GendersResponse = Gender[];\n\nexport type CountriesResponse = Country[];\n\nexport type ItemsParams = {\n  /**\n   * Тип видео контента\n   */\n  type?: string;\n\n  /**\n   * Поиск по заголовку, минимум 3 символа. Выборка по типу LIKE ‘$ASD’\n   */\n  title?: string;\n\n  /**\n   * id жанра. Для множественного поиска список через запятую.\n   */\n  genre?: string;\n\n  /**\n   * id страны. Для множественного поиска список через запятую.\n   */\n  country?: string;\n\n  /**\n   * Год. Для поиска в промежутке year1-year2\n   */\n  year?: string;\n\n  /**\n   * Статус сериала, завершен/снимается\n   */\n  finished?: Bool;\n\n  /**\n   * Имена актеров чере запятую или +(плюс), “Actor1,Actor2+Actor3” - ищет (Actor1 OR (Actor2 AND Actor3))\n   */\n  actor?: string;\n\n  /**\n   * Имена режисеров чере запятую или +(плюс), “Actor1,Actor2+Actor3” - ищет (Actor1 OR (Actor2 AND Actor3))\n   */\n  director?: string;\n\n  /**\n   * Поиск по первой букве в названиях(рус, анг) фильма\n   */\n  letter?: string;\n\n  /**\n   * Массив простых условий для фильтра. Доступные поля как и в сортировке. year <= 100. Объединение условий через AND\n   */\n  conditions?: string[];\n\n  /**\n   * Массив для пропуска пользовательских настроек фильтрации\n   *\n   * * quality - Пропускаем проверку на сомнительное качество\n   * * advert - Пропускаем проверку на контент с рекламой\n   * * erotic - Пропускаем проверку на эротический контент\n   */\n  force?: ('quality' | 'advert' | 'erotic')[];\n\n  /**\n   * Сортировка, по умолчанию ‘updated-‘.\n   * Без знака ‘-‘ сортируется по возрастанию(ASC), со знаком ‘-‘(минус) по убыванию(DESC).\n   * Можно указать можество полей через запятую,.\n   *\n   * * id\n   * * year\n   * * title\n   * * created\n   * * updated\n   * * rating\n   * * views\n   * * watchers\n   */\n  sort?: string;\n\n  period?: string;\n\n  /**\n   * Массив идентификаторов качеств\n   */\n  quality?: string[];\n};\n\nexport type ItemsResponse = {\n  items: Item[];\n} & PaginationResponse;\n\nexport type ItemsSearchParams = {\n  /**\n   * Строка поиска\n   */\n  q: string;\n\n  /**\n   * Тип контента\n   */\n  type?: string;\n\n  /**\n   * Поиск только в одном из полей title, director, cast. Если не указанно, поиск по всем полям\n   */\n  field?: string;\n\n  /**\n   * Разбивает запрос по секциям type. По умолчанию 0\n   */\n  sectioned?: Bool;\n};\n\nexport type ItemsWithPagination = {\n  items: Item[];\n  pagination: Pagination;\n};\n\nexport type ItemsSearchResponse<Sectioned extends Bool | undefined> = (Sectioned extends Bool.True\n  ? {\n      items: {\n        [key: string]: ItemsWithPagination;\n      };\n    }\n  : ItemsWithPagination) &\n  Response;\n\nexport type ItemMediaResponse = {\n  item: ItemDetails;\n} & Response;\n\nexport type ItemMediaLinksResponse = {\n  files: File[];\n  subtitles: Subtitle[];\n};\n\nexport type ItemVoteResponse = {\n  /**\n   * Засчитался ли голос\n   */\n  voted: boolean;\n\n  /**\n   * Всего голосов\n   */\n  total: number;\n\n  /**\n   * Позитивных голосов\n   */\n  positive: number;\n\n  /**\n   * Негативных голосов\n   */\n  negative: number;\n\n  /**\n   * Подсчитанный рейтинг: позитивные минус негативные\n   */\n  rating: number;\n};\n\nexport type ItemCommentsResponse = {\n  item: {\n    id: string;\n    title: string;\n  };\n  comments: Comment[];\n} & Response;\n\nexport type ItemTrailerResponse = {\n  trailer: Trailer;\n} & Response;\n\nexport type ChannelsResponse = {\n  channels: Channel[];\n} & Response;\n\nexport type BookmarksResponse = {\n  items: Bookmark[];\n} & Response;\n\nexport type BookmarkItemsResponse = {\n  folder: Bookmark;\n  items: Item[];\n} & PaginationResponse;\n\nexport type ItemBookmarksResponse = {\n  folders: Bookmark[];\n} & Response;\n\nexport type BookmarkCreateResponse = {\n  folder: Bookmark;\n} & Response;\n\nexport type WatchingItemResponse = {\n  item: {\n    id: string;\n    title: string;\n    type: string;\n\n    /**\n     * В зависимости от типа контента данная часть может меняться\n     * Для сериалов\n     */\n    seasons: Season[];\n\n    /**\n     * Для фильмов, многосерийных фильмов и тд\n     */\n    videos: Video[];\n  };\n} & Response;\n\nexport type WatchingItemsResponse = {\n  items: Item[];\n};\n\nexport type WatchingToggleResponse = {\n  /**\n   * 0 - отмечено как непросмотренные, 1 - отмечено как просмотренные\n   */\n  watched: Bool;\n} & Response;\n\nexport type WatchingToggleWatchlistResponse = {\n  /**\n   * false - отмечено как непросмотренные, true - отмечено как просмотренные\n   */\n  watching: boolean;\n} & Response;\n\nexport type CollectionsResponse = {\n  items: Collection[];\n} & Response;\n\nexport type CollectionItemsResponse = {\n  collection: Collection;\n  items: Item[];\n};\n\nexport type HistoryResponse = {\n  history: History[];\n} & PaginationResponse;\n","import BaseApiClient from './base';\nimport {\n  BookmarkCreateResponse,\n  BookmarkItemsResponse,\n  BookmarksResponse,\n  Bool,\n  ChannelsResponse,\n  CollectionItemsResponse,\n  CollectionsResponse,\n  CountriesResponse,\n  DeviceCodeResponse,\n  DeviceInfo,\n  DeviceInfoResponse,\n  DeviceRemoveResponse,\n  DeviceSettingsParams,\n  DeviceSettingsResponse,\n  DevicesResponse,\n  GendersResponse,\n  HistoryResponse,\n  ItemBookmarksResponse,\n  ItemMediaLinksResponse,\n  ItemMediaResponse,\n  ItemTrailerResponse,\n  ItemVoteResponse,\n  ItemsParams,\n  ItemsResponse,\n  ItemsSearchParams,\n  ItemsSearchResponse,\n  OnConfirm,\n  ServerLocationsReponse,\n  StreamingTypesReponse,\n  TokensResponse,\n  TypesResponse,\n  UserReponse,\n  VideoQualitiesResponse,\n  VoiceoverAuthorsResponse,\n  VoiceoverTypesResponse,\n  WatchingItemResponse,\n  WatchingItemsResponse,\n  WatchingToggleResponse,\n  WatchingToggleWatchlistResponse,\n} from './typings';\n\nconst KINOPUB_API_BASE_URL = process.env.KINOPUB_API_BASE_URL || 'api.service-kp.com';\nconst KINOPUB_API_CLIENT_ID = process.env.KINOPUB_API_CLIENT_ID || 'xbmc';\nconst KINOPUB_API_CLIENT_SECRET = process.env.KINOPUB_API_CLIENT_SECRET || 'cgg3gtifu46urtfp2zp1nqtba0k2ezxh';\n\nclass KinopubApiClient extends BaseApiClient {\n  private clientId: string;\n\n  private clientSecret: string;\n\n  private accessTokenCheckIntervaId!: NodeJS.Timeout | null;\n\n  constructor(\n    clientId: string = KINOPUB_API_CLIENT_ID,\n    clientSecret: string = KINOPUB_API_CLIENT_SECRET,\n    baseUrl: string = KINOPUB_API_BASE_URL,\n  ) {\n    super(baseUrl);\n\n    this.clientId = clientId;\n    this.clientSecret = clientSecret;\n  }\n\n  clearTimers() {\n    clearInterval(this.accessTokenCheckIntervaId!);\n\n    this.accessTokenCheckIntervaId = null;\n  }\n\n  private async processTokensReponse(response: TokensResponse, deviceInfo: DeviceInfo, onSuccess?: Function) {\n    await this.clearTokens();\n\n    switch (response.error) {\n      case 'authorization_pending':\n        break;\n\n      case undefined:\n        this.clearTimers();\n\n        await this.saveTokens(response);\n        this.deviceNotify(deviceInfo);\n        onSuccess?.();\n        return;\n\n      default:\n        this.clearTimers();\n        throw response.error;\n    }\n  }\n\n  /**\n   * Получение access_token и refresh_token\n   * @param code Код для получения access_token и refresh_token\n   */\n  async requestTokens(code: string) {\n    const response = await this.post<TokensResponse>(`/oauth2/device`, null, {\n      grant_type: 'device_token',\n      client_id: this.clientId,\n      client_secret: this.clientSecret,\n      code,\n    });\n\n    return response;\n  }\n\n  /**\n   * Обновление access_token и refresh_token\n   * @param refresh_token Код для обновления access_token и refresh_token\n   */\n  async refreshTokens(refresh_token: string) {\n    const response = await this.post<TokensResponse>(`/oauth2/token`, null, {\n      grant_type: 'refresh_token',\n      client_id: this.clientId,\n      client_secret: this.clientSecret,\n      refresh_token,\n    });\n\n    return response;\n  }\n\n  /**\n   * Получение device_code\n   */\n  async requestDeviceCode() {\n    const response = await this.post<DeviceCodeResponse>(`/oauth2/device`, null, {\n      grant_type: 'device_code',\n      client_id: this.clientId,\n      client_secret: this.clientSecret,\n    });\n\n    return response;\n  }\n\n  /**\n   * Авторизация устройства\n   */\n  async deviceAuthorization(deviceInfo: DeviceInfo, onConfirm?: OnConfirm) {\n    const refreshToken = this.getRefreshToken();\n\n    if (refreshToken) {\n      const response = await this.refreshTokens(refreshToken);\n\n      await this.processTokensReponse(response, deviceInfo);\n    } else {\n      const { interval, code, user_code, verification_uri } = await this.requestDeviceCode();\n\n      onConfirm?.(user_code, verification_uri);\n\n      await new Promise<void>((resolve, reject) => {\n        this.clearTimers();\n        this.accessTokenCheckIntervaId = setInterval(async () => {\n          const response = await this.requestTokens(code);\n\n          try {\n            await this.processTokensReponse(response, deviceInfo, resolve);\n          } catch (ex) {\n            reject(ex);\n          }\n        }, (interval || 10) * 1000);\n      });\n    }\n  }\n\n  /**\n   * Отключение устройства\n   */\n  deactivate() {\n    this.deviceUnlink();\n\n    this.clearTokens();\n    this.clearTimers();\n  }\n\n  /**\n   * Информация о пользователе\n   */\n  user() {\n    return this.get<UserReponse>(`/v1/user`);\n  }\n\n  /**\n   * Список локаций сервера\n   */\n  serverLocations() {\n    return this.get<ServerLocationsReponse>(`/v1/references/server-location`);\n  }\n\n  /**\n   * Список типов стриминга\n   */\n  streamingTypes() {\n    return this.get<StreamingTypesReponse>(`/v1/references/streaming-type`);\n  }\n\n  /**\n   * Список типов переводов\n   */\n  voiceoverTypes() {\n    return this.get<VoiceoverTypesResponse>(`/v1/references/voiceover-type`);\n  }\n\n  /**\n   * Список авторов озвучек/переводов\n   */\n  voiceoverAuthors() {\n    return this.get<VoiceoverAuthorsResponse>(`/v1/references/voiceover-author`);\n  }\n\n  /**\n   * Список качеств видео\n   */\n  videoQualities() {\n    return this.get<VideoQualitiesResponse>(`/v1/references/video-quality`);\n  }\n\n  /**\n   * Список устройств на аккаунте\n   */\n  devices() {\n    return this.get<DevicesResponse>(`/v1/device`);\n  }\n\n  /**\n   * Информация о текущем устройстве\n   */\n  deviceInfo() {\n    return this.get<DeviceInfoResponse>(`/v1/device/info`);\n  }\n\n  /**\n   * Информация о устройстве\n   * @param id Идентификатор устройства\n   */\n  deviceInfoById(id: string) {\n    return this.get<DeviceInfoResponse>(`/v1/device/${id}`);\n  }\n\n  /**\n   * Удаление текущего устройства\n   */\n  deviceUnlink() {\n    return this.post<Response>(`/v1/device/unlink`);\n  }\n\n  /**\n   * Удаление устройства\n   * @param id Идентификатор устройства\n   */\n  deviceRemoveById(id: string) {\n    return this.post<DeviceRemoveResponse>(`/v1/device/${id}/remove`);\n  }\n\n  /**\n   * Изменение информации о текущем устройстве\n   * @param deviceInfo Информация о текущем устройстве\n   */\n  deviceNotify(deviceInfo: DeviceInfo) {\n    return this.post<Response>(`/v1/device/notify`, deviceInfo);\n  }\n\n  /**\n   * Получение настроек устройства\n   * @description На данный момент все настройки разбиваются на тип “чекбокс” и “список”. “Чекбокс” это настройки вида да/нет (1/0).\n   * Если не указан type, значит настройка трактуется как “чекбокс”.\n   * Если указан type: ‘list’, значит надо обрабатывать как список, формат\n   *\n   * Набор полей в списках всегда одинаков - id, label, description, selected\n   *\n   * Доступные настройки:\n   * * supportSsl boolean - Поддерживает ли устройство SSL\n   * * supportHevc boolean - Поддерживает ли устройство HEVC\n   * * supportHdr boolean - Поддерживает ли устройство HDR (10bit color)\n   * * support4k boolean - Поддерживает ли устройство UHD/4K\n   * * mixedPlaylist boolean - На данный момент только для HLS4, плейлист строится из всех доступных файлов AVC+HEVC.\n   * * streamingType integer - Идентификатор типа стриминга\n   * * serverLocation integer - Идентификатор региона, откуда получать контент\n   */\n  deviceSettings(id: string) {\n    return this.get<DeviceSettingsResponse>(`/v1/device/${id}/settings`);\n  }\n\n  /**\n   * Изменение настроек устройства\n   */\n  saveDeviceSettings(id: string, settings: DeviceSettingsParams) {\n    return this.post<Response>(`/v1/device/${id}/settings`, settings);\n  }\n\n  /**\n   * Типы контента\n   * @description Видео контент условно разделен на типы:\n   * * movie - Фильмы\n   * * serial - Сериалы\n   * * 3D - 3D Фильмы\n   * * concert - Концерты\n   * * documovie - Документальные фильмы\n   * * docuserial - Документальные сериалы\n   * * tvshow - ТВ Шоу\n   */\n  types() {\n    return this.get<TypesResponse>(`/v1/types`);\n  }\n\n  /**\n   * Типы жанров\n   * @description Жанры, как и контент, разделены по типам.\n   * Видео контент с типом movie, serial, 3d может принадлежать только жанрам с типом movie и т.д.\n   * * movie - жанры типов видео контента movie, serial, 3D (Фильмов и Сериалов)\n   * * music - жанры типов видео контента concert (Концерты)\n   * * docu - жанры типов видео контента documovie, docuserial (Документальные фильмы и сериалы)\n   */\n  genders() {\n    return this.get<GendersResponse>(`/v1/genres`);\n  }\n\n  /**\n   * Спиоск стран\n   */\n  countries() {\n    return this.get<CountriesResponse>(`/v1/countries`);\n  }\n\n  /**\n   * Видео контент\n   */\n  items(params: ItemsParams, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items`, {\n      ...params,\n      page,\n      perpage,\n    });\n  }\n\n  /**\n   * Поиск\n   * @description Поиск производится по полям title, director, cast\n   */\n  itemsSearch(params: ItemsSearchParams, page?: number, perpage?: number) {\n    return this.get<ItemsSearchResponse<typeof params['sectioned']>>(`/v1/items/search`, {\n      ...params,\n      page,\n      perpage,\n    });\n  }\n\n  /**\n   * Похожие видео\n   * @param id Идентификатор item для которого проивзодится поиск похожих\n   */\n  itemSmiliar(id: string) {\n    return this.get<ItemsResponse>(`/v1/items/similar`, { id });\n  }\n\n  /**\n   * Список медиа-контента\n   * @param id Идентификатор item для которого запрашивается медиа-контент\n   * @param nolinks 1 исключает ссылки на видео (значение по умолчания - 0).\n   * У больших сериалов ссылки занимают львиную долю объема ответа причем большинство из этих ссылок не используется в рамках 1 запроса.\n   * В следующей версии значение по умолчанию станет 1, а через версию параметр станет недоступным и ссылки нужно будет всегда получать в отдельном запросе.\n   */\n  itemMedia(id: string, nolinks: Bool = Bool.True) {\n    return this.get<ItemMediaResponse>(`/v1/items/${id}`, { nolinks });\n  }\n\n  /**\n   * Ссылки на субтитры и видео-файлы для media\n   * @param id Идентификатор media\n   */\n  itemMediaLinks(id: string) {\n    return this.get<ItemMediaLinksResponse>(`/v1/items/media-links`, { mid: id });\n  }\n\n  /**\n   * Ссылка на видео-файл по имени файла\n   * @param file Путь к файлуv\n   * @param type Тип потока, http | hls | hls2 | hls4\n   */\n  itemMediaFileLink(file: string, type: string) {\n    return this.get<{ url: string }>(`/v1/items/media-video-link`, { file, type });\n  }\n\n  /**\n   * Голосование за видео\n   * @param id Идентификатор item\n   * @param like 1: нравится, 0: не нравится\n   */\n  itemVote(id: string, like: Bool) {\n    return this.get<ItemVoteResponse>(`/v1/items/vote`, { id, like });\n  }\n\n  /**\n   * Трейлер к контенту\n   */\n  itemTrailer(id?: string, sid?: string) {\n    return this.get<ItemTrailerResponse>(`/v1/items/trailer`, { id, sid });\n  }\n\n  /**\n   * Свежие видео\n   * @param type Тип видео контента\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  itemsFresh(type: string, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items/fresh`, { type, page, perpage });\n  }\n\n  /**\n   * Горячие видео\n   * @param type Тип видео контента\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  itemsHot(type: string, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items/hot`, { type, page, perpage });\n  }\n\n  /**\n   * Популярные видео\n   * @param type Тип видео контента\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  itemsPopular(type: string, page?: number, perpage?: number) {\n    return this.get<ItemsResponse>(`/v1/items/popular`, { type, page, perpage });\n  }\n\n  /**\n   * Список транслируемых каналов\n   * @description Транслируемые, на данный момент, каналы. Обычно это какие-то события типа Евро 2016, Рио 2016.\n   */\n  channels() {\n    return this.get<ChannelsResponse>(`/v1/tv`);\n  }\n\n  /**\n   * Список папок в закладках\n   */\n  bookmarks() {\n    return this.get<BookmarksResponse>(`/v1/bookmarks`);\n  }\n\n  /**\n   * Список фильмов/сериалов в папке\n   * @param id Идентификатор закладки\n   * @param page Текущая страница\n   * @param perpage Количество на страницу\n   */\n  bookmarkItems(id: string, page?: number, perpage?: number) {\n    return this.get<BookmarkItemsResponse>(`/v1/bookmarks/${id}`, { page, perpage });\n  }\n\n  /**\n   * Список папок в которых присутствует фильм\n   * @param id Идентификатор item\n   */\n  itemBookmarks(id: string) {\n    return this.get<ItemBookmarksResponse>(`/v1/bookmarks/get-item-folders`, { item: id });\n  }\n\n  /**\n   * Создать папку\n   * @param title Название папки\n   */\n  bookmarkCreate(title: string) {\n    return this.post<BookmarkCreateResponse>(`/v1/bookmarks/create`, { title });\n  }\n\n  /**\n   * Удаление папки\n   * @param folder Идентификатор папки\n   */\n  bookmarkRemove(folder: string) {\n    return this.post<Response>(`/v1/bookmarks/remove-folder`, { folder });\n  }\n\n  /**\n   * Добавление фильма в папку\n   * @param item Идентификатор фильма\n   * @param folder Идентификатор папки\n   */\n  bookmarkAddItem(item: string, folder: string) {\n    return this.post<Response>(`/v1/bookmarks/add`, { item, folder });\n  }\n\n  /**\n   * Удаление фильма из папки/папок\n   * @param item Идентификатор фильма\n   * @param folder Идентификатор папки, если отсутствует - удаляем из всех папок\n   */\n  bookmarkRemoveItem(item: string, folder?: string) {\n    return this.post<Response>(`/v1/bookmarks/remove-item`, { item, folder });\n  }\n\n  /**\n   * Переключение добвить/удалить фильм\n   * @param item Идентификатор фильма\n   * @param folder Идентификатор папки\n   */\n  bookmarkToggleItem(item: string, folder: string) {\n    return this.post<Response>(`/v1/bookmarks/toggle-item`, { item, folder });\n  }\n\n  /**\n   * Информация по просмотрам видео\n   * @param id Идентификатор фильма/сериала/и тд\n   * @param video Номер видео, начинается с 1. Если отсутсвует выводятся все видео.\n   * @param season Номер сезона, присутсвует только у сериалов, начинается с 1. Если отсутсвует, выводятся все сезоны.\n   */\n  watchingItem(id: string, video?: number, season?: number) {\n    return this.get<WatchingItemResponse>(`/v1/watching`, { id, video, season });\n  }\n\n  /**\n   * Недосмотренные фильмы/концерты/документальные фильмы/3Д¶\n   */\n  watchingMovies() {\n    return this.get<WatchingItemsResponse>(`/v1/watching/movies`);\n  }\n\n  /**\n   * Список сериалов с новыми/не досмотренными сериями\n   * @param subscribed 0 - Показывать все недосмотренные сериалы, 1 - Показывать сериалы отмеченные “Буду смотреть”\n   */\n  watchingSerials(subscribed?: Bool) {\n    return this.get<WatchingItemsResponse>(`/v1/watching/serials`, { subscribed });\n  }\n\n  /**\n   * Добавление метки о просмотре\n   * @param id Идентификатор фильма/сериала/и тд\n   * @param time Время в секундах, где остановился просмотр\n   * @param video Номер видео, начинается с 1. Если отсутсвует выводятся все видео.\n   * @param season Номер сезона, присутсвует только у сериалов, начинается с 1. Если отсутсвует для сезона, выдаст исключение 404 Not Found.\n   */\n  watchingMarkTime(id: string, time: number, video: number, season?: number) {\n    return this.get<Response>(`/v1/watching/marktime`, { id, time, video, season });\n  }\n\n  /**\n   * Изменение просмотрено/не просмотрено\n   * @param id Идентификатор фильма/сериала/и тд\n   * @param video Номер видео/эпизода, начинается с 1. Если отсутствует, модификации подвергаются все эпизоды сезона\n   * @param season Номер сезона, присутствует только у сериалов, начинается с 1.\n   */\n  watchingToggle(id: string, video?: number, season?: number) {\n    return this.get<WatchingToggleResponse>(`/v1/watching/toggle`, { id, video, season });\n  }\n\n  /**\n   * Добавление сериала в список “Буду смотреть”\n   * @param id Идентификатор фильма/сериала/и тд\n   */\n  watchingToggleWatchlist(id: string) {\n    return this.get<WatchingToggleWatchlistResponse>(`/v1/watching/togglewatchlist`, { id });\n  }\n\n  /**\n   * Список подборок\n   * @param title Поиск по заголовку, минимум 3 символа. Выборка по типу LIKE ‘$ASD’\n   * @param sort Сортировка, по умолчанию ‘updated-‘. Без знака ‘-‘ сортируется по возрастанию(ASC)\n   * * id\n   * * title\n   * * views\n   * * watchers\n   * * created\n   * * updated\n   * @param page Пагинация, текущая страница\n   * @param perpage Пагинация, кол-во на одной странице\n   * @returns\n   */\n  collections(title?: string, sort?: string, page?: number, perpage?: number) {\n    return this.get<CollectionsResponse>(`/v1/collections`, { title, sort, page, perpage });\n  }\n\n  /**\n   * Список фильмов в подбороке\n   * @param id Идентификатор подборки\n   */\n  collectionItems(id: string) {\n    return this.get<CollectionItemsResponse>(`/v1/collections/view`, { id });\n  }\n\n  /**\n   * Получение истории просмотров\n   * @param page Номер страницы\n   * @param perpage Кол-во на страницы, по умолчанию 20, максимум 50\n   */\n  history(page?: number, perpage?: number) {\n    return this.get<HistoryResponse>(`/v1/history`, { page, perpage });\n  }\n\n  /**\n   * Очистить просмотр для media\n   * @param id Идентификатор media\n   */\n  historyClearMedia(id: string) {\n    return this.post<Response>(`/v1/history/clear-for-media`, null, { id });\n  }\n\n  /**\n   * Очистить просмотр для season\n   * @param id Идентификатор season\n   */\n  historyClearSeason(id: string) {\n    return this.post<Response>(`/v1/history/clear-for-season`, null, { id });\n  }\n\n  /**\n   * Очистить просмотр для item\n   * @param id Идентификатор item\n   */\n  historyClearItem(id: string) {\n    return this.post<Response>(`/v1/history/clear-for-item`, null, { id });\n  }\n}\n\nexport default KinopubApiClient;\n","import storage from 'storage';\n\nimport KinopubApiClient from './kinopub';\n\nclass ApiClient extends KinopubApiClient {\n  constructor() {\n    super(\n      process.env.REACT_APP_KINOPUB_API_CLIENT_ID,\n      process.env.REACT_APP_KINOPUB_API_CLIENT_SECRET,\n      process.env.REACT_APP_KINOPUB_API_BASE_URL,\n    );\n  }\n\n  isLogged() {\n    return storage.getItem<boolean>('is_logged');\n  }\n\n  protected getAccessToken() {\n    return storage.getItem<string>('access_token');\n  }\n\n  protected getRefreshToken() {\n    return storage.getItem<string>('refresh_token');\n  }\n\n  protected saveTokens({ access_token, refresh_token, expires_in }: { access_token: string; refresh_token: string; expires_in: number }) {\n    storage.setItem('is_logged', true, 30 * 24 * 3600);\n    storage.setItem('access_token', access_token, expires_in);\n    storage.setItem('refresh_token', refresh_token, 30 * 24 * 3600);\n  }\n\n  protected clearTokens() {\n    (['is_logged', 'access_token', 'refresh_token'] as const).forEach(storage.removeItem);\n  }\n}\n\nexport default ApiClient;\n","import cx from 'classnames';\n\ntype Props = {\n  className?: string;\n};\n\nconst Text: React.FC<Props> = ({ className, ...props }) => {\n  return <p {...props} className={cx('text-primary', className)} />;\n};\n\nexport default Text;\n","import cx from 'classnames';\n\nimport './styles.css';\n\nconst ICONS_MAP = {\n  notifications_active: <>&#xe7f7;</>,\n  new_releases: <>&#xe031;</>,\n  library_music: <>&#xe030;</>,\n  live_tv: <>&#xe639;</>,\n  play_arrow: <>&#xe037;</>,\n  play_circle_outline: <>&#xe039;</>,\n  sports_soccer: <>&#xea2f;</>,\n  expand_more: <>&#xe5cf;</>,\n  expand_less: <>&#xe5ce;</>,\n  settings: <>&#xe8b8;</>,\n} as const;\n\nexport type IconName = keyof typeof ICONS_MAP;\n\ntype Props = {\n  name: IconName | string;\n} & React.HTMLAttributes<HTMLSpanElement>;\n\nconst Icon: React.FC<Props> = ({ name, className, ...props }) => {\n  return (\n    <i {...props} className={cx(`material-icons text-center`, className)}>\n      {ICONS_MAP[name as IconName] || name}\n    </i>\n  );\n};\n\nexport default Icon;\n","import castArray from 'lodash/castArray';\n\nexport const KeyboardCodes = {\n  Enter: 13,\n  Play: 415,\n  Pause: [413, 179],\n  Back: [461, 10009],\n  Backspace: 8,\n  Escape: 27,\n  ArrowLeft: 37,\n  ArrowUp: 38,\n  ArrowRight: 39,\n  ArrowDown: 40,\n  Red: 403,\n  Green: 404,\n  Yellow: 405,\n  Blue: 406,\n  Settings: 10133,\n} as const;\n\nexport type KeyboardCodesKeys = keyof typeof KeyboardCodes;\n\nexport function isKey(e: KeyboardEvent, key: KeyboardCodesKeys | KeyboardCodesKeys[]) {\n  const keys = castArray(key);\n  const keyCode = e.keyCode || e.which;\n\n  return keys.some((key) => e.key === key || castArray(KeyboardCodes[key]).some((code) => keyCode === code));\n}\n\nexport function isBackButton(e: KeyboardEvent): boolean {\n  return isKey(e, ['Back', 'Backspace', 'Escape']);\n}\n\nexport type ButtonClickHandler = (e: KeyboardEvent) => void | boolean | Promise<void> | Promise<boolean>;\n\nlet BUTTON_HANDLERS: {\n  key: KeyboardCodesKeys | KeyboardCodesKeys[];\n  handler: ButtonClickHandler;\n}[];\n\nfunction listenButton() {\n  window.addEventListener('keydown', async (e: KeyboardEvent) => {\n    let isBack = false;\n    if (isBackButton(e)) {\n      isBack = true;\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    for (let { key, handler } of BUTTON_HANDLERS) {\n      if ((key === 'Back' && isBack) || isKey(e, key)) {\n        const result = await handler(e);\n\n        if (result === false) {\n          break;\n        }\n      }\n    }\n  });\n}\n\nexport function registerButtonHandler(key: KeyboardCodesKeys | KeyboardCodesKeys[], handler: ButtonClickHandler) {\n  if (!BUTTON_HANDLERS) {\n    BUTTON_HANDLERS = [];\n\n    listenButton();\n  }\n\n  BUTTON_HANDLERS = [{ key, handler }, ...BUTTON_HANDLERS];\n\n  return () => {\n    BUTTON_HANDLERS = BUTTON_HANDLERS.filter((h) => h.handler !== handler);\n  };\n}\n","import { useEffect } from 'react';\n\nimport { ButtonClickHandler, KeyboardCodesKeys, registerButtonHandler } from 'utils/keyboard';\n\nfunction useButtonEffect(key: KeyboardCodesKeys | KeyboardCodesKeys[], handler: ButtonClickHandler) {\n  useEffect(() => {\n    return registerButtonHandler(key, handler);\n  }, [key, handler]);\n}\n\nexport default useButtonEffect;\n","import { useCallback, useEffect, useState } from 'react';\n\nimport storage, { Key, Value } from 'storage';\n\nfunction useStorageState<T extends Value = Value>(key: Key) {\n  const [value, _setValue] = useState<T>(storage.getItem<T>(key));\n  const setValue = useCallback(\n    (newValue: Value, expire?: number) => {\n      storage.setItem(key, newValue, expire);\n    },\n    [key],\n  );\n\n  useEffect(() => {\n    const listener = () => {\n      _setValue(storage.getItem<T>(key));\n    };\n\n    const unsubscribe = storage.subscribe(listener);\n\n    listener();\n\n    return unsubscribe;\n  }, [key]);\n\n  return [value, setValue] as const;\n}\n\nexport default useStorageState;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 296;","import { useEffect, useMemo, useState } from 'react';\nimport { detect } from '@enact/core/platform';\nimport { deviceinfo } from '@enact/webos/deviceinfo';\n\nconst pkg = require('../../package.json');\n\nconst APP_TITLE = pkg.description;\nconst APP_INFO = `${pkg.name} ${pkg.version}`;\n\nfunction useDeviceInfo() {\n  const [software, setSoftware] = useState('');\n  const [hardware, setHardware] = useState('');\n\n  useEffect(() => {\n    const platform = detect();\n\n    setHardware(navigator.platform);\n    setSoftware(`${platform.platformName} (${APP_INFO})`);\n\n    deviceinfo(\n      // @ts-expect-error\n      (device: { modelName: string; sdkVersion: string; version: string }) => {\n        setHardware(`${device.modelName}${device.version ? ` (${device.version})` : ''}`);\n        setSoftware(\n          `${platform.platformName} ${\n            device.sdkVersion ||\n            // @ts-expect-error\n            platform[platform.platformName]\n          } (${APP_INFO})`,\n        );\n      },\n    );\n  }, []);\n\n  const deviceInfo = useMemo(\n    () => ({\n      software,\n      hardware,\n      title: APP_TITLE,\n    }),\n    [software, hardware],\n  );\n\n  return deviceInfo;\n}\n\nexport default useDeviceInfo;\n","import cx from 'classnames';\n\ntype Props = {\n  className?: string;\n};\n\nconst Spinner: React.FC<Props> = ({ className }) => {\n  return (\n    <div className=\"fixed z-50 top-0 left-0 right-0 bottom-0 flex justify-center items-center\">\n      <i className={cx('animate-spin w-10 h-10 rounded-full border-t-4', className)} />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport cx from 'classnames';\n\nimport Icon from 'components/icon';\nimport Spottable from 'components/spottable';\n\ntype Props = {\n  href: string;\n  icon?: string;\n  iconOnly?: boolean;\n  active?: boolean;\n  state?: any;\n  className?: string;\n  onClick?: () => void;\n};\n\nconst Link: React.FC<Props> = ({ href, state, children, icon, iconOnly, active, className, onClick, ...props }) => {\n  const history = useHistory();\n  const handleOnClick = useCallback(() => {\n    history.push(href, state);\n    onClick?.();\n  }, [href, state, onClick, history]);\n\n  return (\n    <Spottable\n      {...props}\n      className={cx(\n        'whitespace-nowrap cursor-pointer p-1',\n        {\n          'text-primary': !active,\n          'text-red-600': active,\n        },\n        className,\n      )}\n      onClick={handleOnClick}\n      role=\"button\"\n    >\n      <div className=\"flex items-center \">\n        {icon && <Icon className={cx({ 'mr-2': !iconOnly })} name={icon} />}\n        {!iconOnly && children}\n      </div>\n    </Spottable>\n  );\n};\n\nexport default Link;\n","export type Value = string | number | boolean | null;\n\nexport type Key = 'is_logged' | 'access_token' | 'refresh_token' | 'streaming_type';\n\nfunction getItem(prefix: string, key: string) {\n  const data = JSON.parse(window.localStorage.getItem(prefix) || '{}') || {};\n\n  const { value, expire } = data[key] || {};\n\n  if (expire && Date.now() > expire) {\n    return null;\n  }\n\n  return value;\n}\n\nfunction setItem(prefix: string, key: string, value?: Value, expire?: number) {\n  const data = JSON.parse(window.localStorage.getItem(prefix) || '{}') || {};\n\n  window.localStorage.setItem(\n    prefix,\n    JSON.stringify({\n      ...data,\n      [key]:\n        typeof value !== 'undefined'\n          ? {\n              value,\n              expire: expire ? Date.now() + expire * 1000 : undefined,\n            }\n          : undefined,\n    }),\n  );\n}\n\nfunction removeItem(prefix: string, key: string) {\n  return setItem(prefix, key);\n}\n\nexport class Storage<TKeys extends string = string> {\n  private prefix: string;\n  private listeners: (() => void)[];\n\n  constructor(prefix: string) {\n    this.prefix = prefix;\n    this.listeners = [];\n  }\n\n  private emit() {\n    requestAnimationFrame(() => {\n      this.listeners.forEach((listener) => listener());\n    });\n  }\n\n  subscribe = (listener: () => void) => {\n    this.listeners = [...this.listeners, listener];\n\n    return () => {\n      this.listeners = this.listeners.filter((l) => l !== listener);\n    };\n  };\n\n  getItem = <T extends Value>(key: TKeys): T => {\n    return getItem(this.prefix, key);\n  };\n\n  setItem = <T extends Value>(key: TKeys, value: T, expire?: number) => {\n    const item = setItem(this.prefix, key, value, expire);\n\n    this.emit();\n\n    return item;\n  };\n\n  removeItem = (key: TKeys) => {\n    removeItem(this.prefix, key);\n\n    this.emit();\n  };\n}\n\nexport default new Storage<Key>('kinopub');\n","import { generatePath as baseGeneratePath } from 'react-router-dom';\n\nexport const PATHS = {\n  Index: '/',\n  Home: '/home',\n  Search: '/search',\n  Watching: '/watching',\n  Category: '/category/:categoryId',\n  Channels: '/channels',\n  Channel: '/channels/:channelId',\n  Bookmarks: '/bookmarks',\n  Bookmark: '/bookmarks/:bookmarkId',\n  Collections: '/collections',\n  Collection: '/collections/:collectionId',\n  History: '/history',\n  Item: '/item/:itemId',\n  Video: '/video/:videoId',\n  Trailer: '/trailer/:trailerId',\n  Pair: '/pair',\n  Speed: '/speed',\n  Settings: '/settings',\n};\n\nexport type PathValuesType = typeof PATHS[keyof typeof PATHS];\n\nexport type RouteParams = {\n  categoryId?: string;\n  channelId?: string;\n  collectionId?: string;\n  bookmarkId?: string;\n  itemId?: string;\n  videoId?: string;\n  trailerId?: string;\n};\n\nexport function generatePath(pattern: PathValuesType, params?: RouteParams, search?: Record<string, string | number>) {\n  // @ts-expect-error\n  const query = search ? `?${new URLSearchParams(search)}` : '';\n\n  return baseGeneratePath(pattern, params) + query;\n}\n","import { error } from '@enact/webos/pmloglib';\n\n// Logs any uncaught exceptions to the system logs for future troubleshooting. Payload can be\n// customized by the application for its particular requirements.\nconst handleError = (ev: ErrorEvent) => {\n  let stack = (ev.error && ev.error.stack) || null;\n\n  if (stack && stack.length > 512) {\n    // JSON must be limitted to 1024 characters so we truncate the stack to 512 for safety\n    stack = ev.error.stack.substring(0, 512);\n  }\n\n  const errorInfo = {\n    message: ev.message,\n    url: ev.filename,\n    line: ev.lineno,\n    column: ev.colno,\n    stack,\n  };\n\n  error('app.onerror', errorInfo, '');\n\n  // Calling preventDefault() will avoid logging the error to the console\n  // ev.preventDefault();\n};\n\nwindow.addEventListener('error', handleError);\n","import { BrowserRouter, BrowserRouterProps, MemoryRouter, MemoryRouterProps } from 'react-router-dom';\n\nexport type RouterProps = BrowserRouterProps | MemoryRouterProps;\n\nconst IS_WEB = window.location.origin.startsWith('http');\n\nconst Router: React.FC<RouterProps> = (props) => {\n  if (IS_WEB) {\n    return <BrowserRouter {...props} />;\n  }\n\n  return <MemoryRouter {...props} />;\n};\n\nexport default Router;\n","import React from 'react';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst FillLayout: React.FC<Props> = ({ children }) => {\n  return <div className=\"w-screen h-screen\">{children}</div>;\n};\n\nexport default FillLayout;\n","import { useLocation } from 'react-router-dom';\nimport map from 'lodash/map';\n\nimport Link from 'components/link';\nimport { PATHS, generatePath } from 'routes';\n\nconst menuItems: {\n  name: string;\n  icon: string;\n  href: string;\n}[][] = [\n  [\n    {\n      name: 'Главная',\n      icon: 'home',\n      href: PATHS.Home,\n    },\n    {\n      name: 'Поиск',\n      icon: 'search',\n      href: PATHS.Search,\n    },\n    {\n      name: 'Я смотрю',\n      icon: 'notifications_active',\n      href: PATHS.Watching,\n    },\n    {\n      name: 'Закладки',\n      icon: 'bookmark',\n      href: PATHS.Bookmarks,\n    },\n    {\n      name: 'Подборки',\n      icon: 'list',\n      href: PATHS.Collections,\n    },\n  ],\n  [\n    {\n      name: 'Фильмы',\n      icon: 'movie',\n      href: generatePath(PATHS.Category, { categoryId: 'movie' }),\n    },\n    {\n      name: 'Сериалы',\n      icon: 'tv',\n      href: generatePath(PATHS.Category, { categoryId: 'serial' }),\n    },\n    {\n      name: 'Концерты',\n      icon: 'library_music',\n      href: generatePath(PATHS.Category, { categoryId: 'concert' }),\n    },\n    {\n      name: 'Докуфильмы',\n      icon: 'archive',\n      href: generatePath(PATHS.Category, { categoryId: 'documovie' }),\n    },\n    {\n      name: 'Докусериалы',\n      icon: 'description',\n      href: generatePath(PATHS.Category, { categoryId: 'docuserial' }),\n    },\n    {\n      name: 'ТВ Шоу',\n      icon: 'live_tv',\n      href: generatePath(PATHS.Category, { categoryId: 'tvshow' }),\n    },\n    {\n      name: 'Спорт',\n      icon: 'sports_soccer',\n      href: generatePath(PATHS.Channels),\n    },\n  ],\n  [\n    {\n      name: 'Спидтест',\n      icon: 'speed',\n      href: PATHS.Speed,\n    },\n    {\n      name: 'Настройки',\n      icon: 'settings',\n      href: PATHS.Settings,\n    },\n  ],\n];\n\ntype Props = {};\n\nconst Menu: React.FC<Props> = (props) => {\n  const location = useLocation();\n\n  return (\n    <nav className=\"group h-screen flex flex-col justify-between\" {...props}>\n      {map(menuItems, (list, idx) => (\n        <ul key={idx}>\n          {map(list, (item) => (\n            <li key={item.href}>\n              <Link href={item.href} icon={item.icon} active={location.pathname === item.href} className=\"px-2 py-1 rounded-r\">\n                {item.name}\n              </Link>\n            </li>\n          ))}\n        </ul>\n      ))}\n    </nav>\n  );\n};\n\nexport default Menu;\n","import React from 'react';\n\nimport Menu from 'containers/menu';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst MainLayout: React.FC<Props> = ({ children, ...rest }) => {\n  return (\n    <div className=\"flex h-screen w-screen overflow-hidden\" {...rest}>\n      <Menu />\n      <div className=\"w-full px-2\">{children}</div>\n    </div>\n  );\n};\n\nexport default MainLayout;\n","import React, { Suspense, createElement, useMemo } from 'react';\nimport { Route, RouteComponentProps, RouteProps } from 'react-router-dom';\n\nimport Spinner from 'components/spinner';\nimport FillLayout from 'layouts/fill';\nimport MainLayout from 'layouts/main';\n\nexport type ViewProps = {\n  component: RouteProps['component'];\n  layout?: 'main' | 'fill';\n} & Omit<RouteProps, 'component' | 'render'>;\n\nconst View: React.FC<ViewProps> = ({ component, layout, ...props }) => {\n  const Layout = useMemo(() => {\n    if (layout === 'fill') {\n      return FillLayout;\n    }\n\n    return MainLayout;\n  }, [layout]);\n  const render = useMemo<React.FC<RouteComponentProps>>(\n    () => (routeProps) =>\n      (\n        <Layout>\n          <Suspense fallback={<Spinner />}>{createElement(component!, routeProps)}</Suspense>\n        </Layout>\n      ),\n    [component, Layout],\n  );\n\n  return <Route {...props} render={render} />;\n};\n\nexport default View;\n","import { useCallback, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport useApiMutation from 'hooks/useApiMutation';\nimport useDeviceInfo from 'hooks/useDeviceInfo';\nimport useStorageState from 'hooks/useStorageState';\nimport { PATHS } from 'routes';\n\nfunction useDeviceAuthorizationEffect() {\n  const history = useHistory();\n  const deviceInfo = useDeviceInfo();\n  const { deviceAuthorizationAsync } = useApiMutation('deviceAuthorization');\n  const { deviceNotify } = useApiMutation('deviceNotify');\n  const [isLogged] = useStorageState<boolean>('is_logged');\n\n  const handleOnConfirm = useCallback(\n    (userCode: string, verificationUri: string) => {\n      history.replace(PATHS.Pair, {\n        userCode,\n        verificationUri,\n      });\n    },\n    [history],\n  );\n\n  useEffect(() => {\n    const timeoutId = setTimeout(async () => {\n      const path = history.location.pathname;\n      await deviceAuthorizationAsync([deviceInfo, handleOnConfirm]);\n\n      if (path === PATHS.Pair || path === PATHS.Index) {\n        history.replace(PATHS.Home);\n      }\n    }, 500);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [isLogged, deviceInfo, history, handleOnConfirm, deviceAuthorizationAsync]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      deviceNotify([deviceInfo]);\n    }, 2 * 1000);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [deviceInfo, deviceNotify]);\n}\n\nexport default useDeviceAuthorizationEffect;\n","import { useCallback, useState } from 'react';\nimport { Switch, useHistory } from 'react-router-dom';\n\nimport Text from 'components/text';\nimport useButtonEffect from 'hooks/useButtonEffect';\nimport useDeviceAuthorizationEffect from 'hooks/useDeviceAuthorizationEffect';\nimport { PATHS } from 'routes';\n\nconst Views: React.FC = ({ children, ...props }) => {\n  const history = useHistory();\n  const [showNotice, setShowNotice] = useState(false);\n\n  const handleBackButtonClick = useCallback(() => {\n    if (history.location.pathname !== PATHS.Home) {\n      history.goBack();\n    } else if (showNotice) {\n      window.close();\n    } else {\n      setShowNotice(true);\n\n      setTimeout(() => {\n        setShowNotice(false);\n      }, 5 * 1000);\n    }\n  }, [history, showNotice]);\n\n  useButtonEffect('Back', handleBackButtonClick);\n  useDeviceAuthorizationEffect();\n\n  return (\n    <div {...props}>\n      {showNotice && (\n        <div className=\"fixed top-2 right-2 p-4 z-999 shadow-xl rounded-xl bg-gray-500 bg-opacity-70\">\n          <Text>\n            Чтобы закрыть приложение,\n            <br />\n            нажмите кнопку \"назад\" ещё раз\n          </Text>\n        </div>\n      )}\n      <Switch>{children}</Switch>\n    </div>\n  );\n};\n\nexport default Views;\n","import 'styles/global.css';\n\nimport React from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport MoonstoneDecorator from '@enact/moonstone/MoonstoneDecorator';\n\nimport Router from 'components/router';\nimport View from 'components/view';\nimport Views from 'containers/views';\nimport { PATHS } from 'routes';\n\nconst BookmarkView = React.lazy(() => import('views/booksmark'));\nconst BookmarksView = React.lazy(() => import('views/booksmarks'));\nconst CategoryView = React.lazy(() => import('views/category'));\nconst ChannelView = React.lazy(() => import('views/channel'));\nconst ChannelsView = React.lazy(() => import('views/channels'));\nconst CollectionView = React.lazy(() => import('views/collection'));\nconst CollectionsView = React.lazy(() => import('views/collections'));\nconst HistoryView = React.lazy(() => import('views/history'));\nconst HomeView = React.lazy(() => import('views/home'));\nconst IndexView = React.lazy(() => import('views/index'));\nconst ItemView = React.lazy(() => import('views/item'));\nconst NotFoundView = React.lazy(() => import('views/notFound'));\nconst PairView = React.lazy(() => import('views/pair'));\nconst SearchView = React.lazy(() => import('views/search'));\nconst SettingsView = React.lazy(() => import('views/settings'));\nconst SpeedView = React.lazy(() => import('views/speed'));\nconst TrailerView = React.lazy(() => import('views/trailer'));\nconst VideoView = React.lazy(() => import('views/video'));\nconst WatchingView = React.lazy(() => import('views/watching'));\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000,\n    },\n  },\n});\n\ntype Props = {};\n\nconst App: React.FC<Props> = (props) => {\n  return (\n    <Router>\n      <QueryClientProvider client={queryClient}>\n        <Views {...props}>\n          <View path={PATHS.Index} component={IndexView} layout=\"fill\" exact />\n          <View path={PATHS.Home} component={HomeView} />\n          <View path={PATHS.Search} component={SearchView} />\n          <View path={PATHS.Category} component={CategoryView} />\n          <View path={PATHS.Watching} component={WatchingView} />\n          <View path={PATHS.Bookmark} component={BookmarkView} />\n          <View path={PATHS.Bookmarks} component={BookmarksView} />\n          <View path={PATHS.Collection} component={CollectionView} />\n          <View path={PATHS.Collections} component={CollectionsView} />\n          <View path={PATHS.Channel} component={ChannelView} layout=\"fill\" />\n          <View path={PATHS.Channels} component={ChannelsView} />\n          <View path={PATHS.History} component={HistoryView} />\n          <View path={PATHS.Item} component={ItemView} layout=\"fill\" />\n          <View path={PATHS.Video} component={VideoView} layout=\"fill\" />\n          <View path={PATHS.Trailer} component={TrailerView} layout=\"fill\" />\n          <View path={PATHS.Pair} component={PairView} layout=\"fill\" />\n          <View path={PATHS.Speed} component={SpeedView} />\n          <View path={PATHS.Settings} component={SettingsView} />\n          <View component={NotFoundView} />\n        </Views>\n      </QueryClientProvider>\n    </Router>\n  );\n};\n\nexport default MoonstoneDecorator(App);\n","import './polyfills';\nimport './attachErrorHandler';\n\nimport { render } from 'react-dom';\n\nimport App from './App';\n\nconst app = <App />;\n\n// In a browser environment, render instead of exporting\nif (typeof window !== 'undefined') {\n  render(app, document.getElementById('root'));\n}\n\nexport default app;\n"],"sourceRoot":""}